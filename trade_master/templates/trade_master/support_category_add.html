{% extends 'default_theme/base/__base.html' %}
{% load static %} 

{% load form_custom %}


{% block Style_sheets %}
{{ subadmin_formset.media.css }}
{% endblock Style_sheets %}
{% load widget_tweaks %}

 {% block Content_Area %}
    <!-- Main content -->
    <section class="content">
      <!-- Small boxes (Stat box) -->
     
   	 <div class="box box-default">
        <div class="box-header with-border">
          <h3 class="box-title">{{ Title}}</h3>
          <div class="box-tools pull-right">
            {% comment %}
            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
            <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>
            {% endcomment %}
          </div>
        </div>
        {% if messages %}
     {% for message in messages %}
     <div class="alert {{ message.tags }} alert-dismissible" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      {{ message }}
    </div>
    {% endfor %}
    {% endif %}
         <!-- form start -->
         <form role="form" action="" method='post' enctype="multipart/form-data" novalidate ="novalidate" id="admincategory">
             {% csrf_token %} 
             {{ form.media }}
        <!-- /.box-header -->
        <div class="box-body">
          <div class="row">
            <div class="col-md-6">
              
              <!-- /.form-group -->


              
              <div class="form-group">
                <label >{{form.category.label }} 
                  <span class="text-danger"> * </span>
                </label>
                <input type="text" name="category" maxlength="200" class="form-control" placeholder="Category Name" id="id_category" required>
                <!-- <p class="mt-2" id ="blankMsgName" style="color:red"> </p> -->
              </div>

              <div class="form-group">
                <label >{{form.status.label }} 
                </label>
                  {%render_field form.status class+="form-control" placeholder=form.status.label %}
                  {% if form.status.errors %}
                  {% for error in form.status.errors %}
                   <span class="text-danger">* {{ error|escape }} </span>
                  {% endfor %}
                {% endif %}
                 
              </div>
         
                  
              <!-- /.form-group -->
            </div>
            <!-- /.col -->
            <div class="col-md-6">
             
            <!-- /.col -->
            </div>
          </div>
           <!-- /.second row -->
        <!-- /.box-body -->
         <div class="box-footer">
                <button type="submit" class="btn btn-primary">Submit</button>
                 &nbsp;&nbsp;
                <a href="{% url Btn_url %}" class="btn btn-primary">Back</a>
         </div>
          </form>
      </div>

    </section>
    <!-- /.content -->




 {% endblock Content_Area %}

 {% block Java_Scripts %}

 <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.js"></script>
<script>
 
  $("#admincategory").validate({
    ignore:[],
    rules:
    {
      name:{
    required:{
    depends:function(){
    $(this).val($.trim($(this).val()));
    
    return true;
    }
    }
    },
    description:{
    required:{
    depends:function(){
    $(this).val($.trim($(this).val()));
    return true;
    }
    }
    },
    
    },
  
    messages:{
      name:{
    required:'Enter Category Name'
    },
    description:{
    required:'Enter Category Description'
    },
    
    }
    });
 
 </script>

<script>
  function verifyname(event){

   var name = $("#id_category").val();
   
      var pattern = /^[a-zA-Z_ ]/;   
      
      if(!pattern.test(event.key)){      
      
    document.getElementById("blankMsgName").innerHTML = 'Only allowed a characters';
    return false;
  }   else {
      document.getElementById("blankMsgName").innerHTML = "";
      return true;
  }
}
</script>

<script>
  function validate_category_name() {
     $.ajax({
         type: "POST",
         url: '/trademaster/ajax_validate_support_category_name/', 
         data: {
             category : $("#id_category").val(), 
             csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
         },
         success:function(data)
         {
       document.getElementById("blankMsgName").innerHTML = "Category name was already exist";
           
         },
         error:function(data)
         {
       document.getElementById("blankMsgName").innerHTML = "";
           
         }
       
     });
     };
 </script>

 {% endblock %}


